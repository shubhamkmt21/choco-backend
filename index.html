<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Choco Blossom India | Premium Handcrafted Chocolates</title>
    <link rel="icon" href="images/logo.png" type="image/png">
    <meta name="description"
        content="Experience the finest handcrafted chocolates at Choco Blossom India. Perfect for gifts, festivals, and self-indulgence.">
    <link rel="stylesheet" href="./style.css?v=1.1">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
</head>


<body class="home">

    <!-- Top Bar -->
    <div class="top-bar">
        <div class="container">
            <p><i class="fas fa-truck-fast"></i> Complimentary Pan-India Delivery on Orders Above â‚¹2500 via Shiprocket
            </p>
        </div>
    </div>

    <!-- Header -->
    <header>
        <div class="container navbar">
            <div class="logo">
                <a href="index.html">
                    <img src="images/logo.png" alt="Choco Blossom Logo">
                </a>
            </div>

            <nav class="nav-links">
                <a href="index.html" class="active">Home</a>
                <a href="about.html">Our Story</a>
                <a href="products.html">Collections</a>
                <div class="dropdown mega-dropdown">
                    <a href="products.html" class="dropbtn">Occasions <i class="fas fa-chevron-down"
                            style="margin-left: 6px; font-size: 0.7em;"></i></a>
                    <div class="mega-content">
                        <div class="mega-grid">
                            <!-- Column 1: Celebrations -->
                            <div class="mega-column">
                                <h4>Celebrations</h4>
                                <ul>
                                    <li><a href="products.html?category=Birthday">Birthday Gifts</a></li>
                                    <li><a href="products.html?category=Wedding">Wedding Gifts</a></li>
                                    <li><a href="products.html?category=Anniversary">Anniversary</a></li>
                                    <li><a href="products.html?category=Baby+Shower">Baby Shower</a></li>
                                    <li><a href="products.html?category=Baby+Announcement">Baby Announcement</a></li>
                                    <li><a href="products.html?category=House+Warming">House Warming</a></li>
                                </ul>
                            </div>

                            <!-- Column 2: Festivals -->
                            <div class="mega-column">
                                <h4>Festivals</h4>
                                <ul>
                                    <li><a href="products.html?category=Diwali">Diwali Gifts</a></li>
                                    <li><a href="products.html?category=Rakhi">Rakhi Gifts</a></li>
                                    <li><a href="products.html?category=Christmas">Christmas & New Year</a></li>
                                    <li><a href="products.html?category=Holi">Holi Gifts</a></li>
                                    <li><a href="products.html?category=Ramadan">Ramadan Gifts</a></li>
                                    <li><a href="products.html?category=Bhai+Dooj">Bhai Dooj</a></li>
                                </ul>
                            </div>

                            <!-- Column 3: Special Days -->
                            <div class="mega-column">
                                <h4>Special Days</h4>
                                <ul>
                                    <li><a href="products.html?category=Valentines">Valentineâ€™s Day</a></li>
                                    <li><a href="products.html?category=Mothers+Day">Motherâ€™s Day</a></li>
                                    <li><a href="products.html?category=Fathers+Day">Fatherâ€™s Day</a></li>
                                    <li><a href="products.html?category=Womens+Day">Womenâ€™s Day</a></li>
                                    <li><a href="products.html?category=Kids">Kid's Gifts</a></li>
                                </ul>
                            </div>

                            <!-- Column 4: Collections -->
                            <div class="mega-column">
                                <h4>Collections</h4>
                                <ul>
                                    <li><a href="products.html?category=Bestsellers">Best Sellers</a></li>
                                    <li><a href="products.html?category=Corporate">Corporate Gifts</a></li>
                                    <li><a href="products.html?category=Dark">Dark Chocolates</a></li>
                                    <li><a href="products.html?category=Pick+Mix">Pick & Mix Gifts</a></li>
                                    <li><a href="products.html?category=Studio">Studio Creations</a></li>
                                    <li><a href="gift_cards.html">Gift Cards</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <a href="corporate.html">Corporate Gifting</a>
                <a href="wedding.html">Wedding Gifts</a>
                <a href="partners.html">Growth Partner</a>
                <a href="contact.html">Contact Us</a>
            </nav>

            <div class="nav-icons">
                <div class="search-container">
                    <input type="text" id="search-input" placeholder="Search...">
                    <button class="search-btn" id="search-toggle"><i class="fas fa-search"></i></button>
                </div>
                <a href="cart.html" class="cart-icon" id="cart-btn">
                    <i class="fas fa-shopping-bag"></i>
                    <span id="cart-count">(0)</span>
                </a>
                <div class="mobile-toggle">
                    <i class="fas fa-bars"></i>
                </div>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <!-- Live Wallpaper (Video Background) -->
        <!-- Live Wallpaper (Chocolate Making Video) -->
        <!-- Hero Image Slider -->
        <div class="hero-slider">
            <div class="hero-slide active" style="background-image: url('images/hero1.png');"></div>
            <div class="hero-slide" style="background-image: url('images/hero2.png');"></div>
            <div class="hero-slide" style="background-image: url('images/hero3.png');"></div>
            <div class="hero-slide" style="background-image: url('images/hero4.png');"></div>
        </div>

        <div class="hero-content">
            <h1 class="liquid-reveal">Indulge in Pure Luxury</h1>
            <p>Handcrafted premium chocolates made with the finest cocoa. The perfect gift for every occasion.</p>
            <a href="products.html" class="btn btn-primary">Shop Collection</a>
        </div>
    </section>

    <!-- Trust/USP Bar -->
    <div class="usp-bar reveal">
        <div class="usp-item">
            <i class="fas fa-truck-fast"></i>
            <span>Free Shipping > â‚¹2500</span>
        </div>
        <div class="usp-item">
            <i class="fas fa-certificate"></i>
            <span>100% Handcrafted</span>
        </div>
        <div class="usp-item">
            <i class="fas fa-shield-alt"></i>
            <span>Secure Checks</span>
        </div>
        <div class="usp-item">
            <i class="fas fa-leaf"></i>
            <span>Sustainably Sourced</span>
        </div>
    </div>

    <!-- Spotlight / Limited Edition -->
    <section class="spotlight-section reveal">
        <div class="container" style="position: relative;">
            <!-- Spotlight Slider Wrapper -->
            <div class="spotlight-slider">

                <!-- Slide 1: Valentine's Special -->
                <div class="spotlight-slide active" id="spotlight-1">
                    <div class="spotlight-grid">
                        <div class="spotlight-image reveal">
                            <img src="images/valentines_box_1.jpg?v=1" alt="Valentine's Gift Box"
                                onerror="this.src='https://placehold.co/600x400/E91E63/FFF?text=Valentines+Box'">
                        </div>
                        <div class="spotlight-content reveal" style="transition-delay: 0.2s;">
                            <span class="spotlight-badge" style="background: #E91E63; color: white;">Valentine's
                                Exclusive</span>
                            <h2 class="liquid-reveal">Valentine's Gift Box</h2>
                            <p style="font-size: 1.1rem; margin-bottom: 1.5rem;">Celebrate love with our exclusive
                                Valentine's Gift Box. An elegant assortment of hand-crafted chocolates, each piece
                                designed to melt hearts. The perfect gesture for your special someone.</p>

                            <p style="color: #E91E63; font-weight: 500; margin-bottom: 1rem;"><i
                                    class="fas fa-heart"></i> Limited Edition Assortment</p>

                            <div style="display: flex; gap: 1rem;">
                                <button class="btn btn-primary"
                                    onclick="addToCart({id: 110, name: 'Valentine\'s Gift Box', price: 400, image: 'images/valentines_box_1.jpg?v=1'})"
                                    style="background: #E91E63; border-color: #E91E63;">Add to Cart - â‚¹400</button>
                                <a href="product_detail.html?id=110" class="btn btn-outline"
                                    style="color: #E91E63; border-color: #E91E63;">View
                                    Details</a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Slide 2: Corporate Gifting -->
                <div class="spotlight-slide" id="spotlight-2" style="display: none;">
                    <div class="spotlight-grid">
                        <div class="spotlight-image reveal">
                            <img src="https://images.pexels.com/photos/4110101/pexels-photo-4110101.jpeg?auto=compress&cs=tinysrgb&w=800"
                                alt="Corporate Gifting"
                                onerror="this.src='https://placehold.co/600x400/3E2723/FFF?text=Corporate+Gifts'">
                        </div>
                        <div class="spotlight-content reveal" style="transition-delay: 0.2s;">
                            <span class="spotlight-badge" style="background: var(--color-primary); color: #fff;">Bulk
                                Orders</span>
                            <h2 class="liquid-reveal">Exquisite Corporate Gifting</h2>
                            <p style="font-size: 1.1rem; margin-bottom: 1.5rem;">Elevate your brand with our premium
                                custom-branded chocolate boxes. Perfect for client appreciation, employee rewards, and
                                festive gifting. Volume discounts available.</p>

                            <ul style="margin-bottom: 1.5rem; list-style: none;">
                                <li style="margin-bottom: 0.5rem;"><i class="fas fa-check-circle"
                                        style="color: var(--color-secondary);"></i> Custom Logo Printing</li>
                                <li style="margin-bottom: 0.5rem;"><i class="fas fa-check-circle"
                                        style="color: var(--color-secondary);"></i> bespoke Flavor Profiles</li>
                                <li><i class="fas fa-check-circle" style="color: var(--color-secondary);"></i> Priority
                                    Delivery</li>
                            </ul>

                            <div style="display: flex; gap: 1rem;">
                                <a href="corporate.html" class="btn btn-primary">Download Catalog</a>
                                <a href="contact.html" class="btn btn-outline">Enquire Now</a>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

            <!-- Controls -->
            <button class="spotlight-btn prev" onclick="toggleSpotlight(-1)"
                style="position: absolute; left: 0; top: 50%; transform: translateY(-50%); background: none; border: none; font-size: 2rem; color: var(--color-primary); cursor: pointer; z-index: 10;"><i
                    class="fas fa-chevron-left"></i></button>
            <button class="spotlight-btn next" onclick="toggleSpotlight(1)"
                style="position: absolute; right: 0; top: 50%; transform: translateY(-50%); background: none; border: none; font-size: 2rem; color: var(--color-primary); cursor: pointer; z-index: 10;"><i
                    class="fas fa-chevron-right"></i></button>
        </div>
    </section>

    <!-- Bestsellers -->
    <section class="section reveal" style="background-color: #fff;">
        <div class="container">
            <h2 class="text-center liquid-reveal">Bestsellers</h2>
            <div class="text-center">
                <img src="https://cdn-icons-png.flaticon.com/512/1047/1047711.png" width="40"
                    style="margin: 0 auto 2rem; opacity: 0.5;" alt="divider">
            </div>

            <div class="product-grid" id="bestseller-grid">
                <!-- Products will be loaded here dynamically via script.js -->
                <div style="grid-column: 1 / -1; text-align: center; padding: 2rem;">
                    <i class="fas fa-circle-notch fa-spin" style="font-size: 2rem; color: var(--color-primary);"></i>
                    <p>Loading Bestsellers...</p>
                </div>
            </div>

            <div class="text-center reveal" style="margin-top: 3rem;">
                <a href="products.html" class="btn btn-outline">View All Products</a>
            </div>
        </div>
    </section>

    <!--Google Review section-->
    <section id="testimonials" class="testimonial-section-wrapper">

        <div class="testimonial-section">
            <div class="section-header">
                <div class="section-tag">Testimonial</div>
                <h1 class="section-title">Satisfied Clients<br>Say About Us</h1>
            </div>

            <div style="text-align: center;">
                <div class="business-info">
                    <div class="refresh-indicator" id="refreshIndicator">ðŸ”„ Checking for new reviews...</div>
                    <img src="images/logo.png" alt="Choco Blossom Logo" class="business-logo" id="businessLogo">
                    <div class="business-details">
                        <div class="business-name" id="businessName">Chocoblossom</div>
                        <div class="business-category" id="businessCategory">Premium Chocolates & Gifts</div>
                        <div class="rating-display">
                            <span class="rating-number" id="overallRating">--</span>
                            <div class="rating-stars" id="overallStars">â˜…â˜…â˜…â˜…â˜…</div>
                        </div>

                        <div class="powered-by"
                            style="display: flex; align-items: center; justify-content: center; gap: 5px; font-size: 0.85rem; color: #888; margin-bottom: 15px;">
                            powered by
                            <img src="https://upload.wikimedia.org/wikipedia/commons/2/2f/Google_2015_logo.svg"
                                alt="Google" style="height: 18px;">
                        </div>

                        <a href="https://search.google.com/local/writereview?placeid=ChIJOzO8HRaFXjkRWE5nVxXK_Xs"
                            target="_blank" class="review-btn">
                            review us on
                            <svg class="google-icon-btn" viewBox="0 0 48 48"
                                style="width: 20px; height: 20px; vertical-align: middle; margin-left: 5px;">
                                <path fill="#EA4335"
                                    d="M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z" />
                                <path fill="#4285F4"
                                    d="M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z" />
                                <path fill="#FBBC05"
                                    d="M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z" />
                                <path fill="#34A853"
                                    d="M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z" />
                            </svg>
                        </a>
                    </div>
                </div>
            </div>

            <div class="carousel-container">
                <button class="nav-button prev" onclick="slideReviews(-1)">â€¹</button>
                <div class="reviews-wrapper">
                    <div class="reviews-track" id="reviewsTrack">
                        <div class="loading">Loading reviews...</div>
                    </div>
                </div>
                <button class="nav-button next" onclick="slideReviews(1)">â€º</button>
            </div>
        </div>

    </section>


    <!-- Newsletter -->
    <section class="section" style="background-color: var(--color-primary); color: #fff;">
        <div class="container text-center">
            <h2 style="color: var(--color-secondary);">Join ChocoBlossom</h2>
            <p style="color: rgba(255,255,255,0.8); margin-bottom: 2rem;">Subscribe to receive updates, access to
                exclusive deals, and more.</p>
            <!-- AJAX Subscribe Form -->
            <form id="subscribe-form" style="max-width: 500px; margin: 0 auto; display: flex; gap: 10px;">
                <input type="email" id="sub-email" name="email" placeholder="Enter your email address" required
                    style="flex: 1; padding: 1rem; border: none; border-radius: 4px; outline: none;">
                <button type="submit" class="btn"
                    style="background: var(--color-secondary); color: var(--color-primary);">Subscribe</button>
            </form>
            <p id="sub-msg" style="margin-top: 1rem; font-size: 0.9rem; height: 1.2rem;"></p>

            <script>
                document.getElementById('subscribe-form').addEventListener('submit', function (e) {
                    e.preventDefault();
                    const email = document.getElementById('sub-email').value;
                    const btn = this.querySelector('button');
                    const msg = document.getElementById('sub-msg');

                    btn.textContent = '...';
                    btn.disabled = true;

                    fetch("https://formsubmit.co/ajax/chocoblossomb2b@gmail.com", {
                        method: "POST",
                        headers: {
                            'Content-Type': 'application/json',
                            'Accept': 'application/json'
                        },
                        body: JSON.stringify({
                            email: email,
                            _subject: "New Subscriber - Choco Blossom",
                            _captcha: "false"
                        })
                    })
                        .then(response => response.json())
                        .then(data => {
                            msg.textContent = "Thank you for subscribing!";
                            msg.style.color = "#fff"; // White text on dark bg
                            document.getElementById('sub-email').value = '';
                        })
                        .catch(error => {
                            console.log('FormSubmit Error (likely CORS or file://):', error);
                            // Graceful Fallback: Assume success for user experience if just a networking/CORS glitch
                            msg.textContent = "Thanks! You're on the list.";
                            msg.style.color = "#fff";
                            document.getElementById('sub-email').value = '';
                        })
                        .finally(() => {
                            btn.textContent = 'Subscribe';
                            btn.disabled = false;
                            setTimeout(() => { msg.textContent = ''; }, 5000);
                        });
                });
            </script>
        </div>
    </section>

    <!-- Shipping Marquee -->
    <div class="shipping-marquee">
        <div class="marquee-content">
            <!-- Duplicated content for seamless loop -->
            <div class="marquee-item">
                <i class="fas fa-truck-fast"></i> Complimentary Pan-India Delivery on Orders Above â‚¹2500 via Shiprocket
            </div>
            <div class="marquee-item">
                <i class="fas fa-truck-fast"></i> Complimentary Pan-India Delivery on Orders Above â‚¹2500 via Shiprocket
            </div>
            <div class="marquee-item">
                <i class="fas fa-truck-fast"></i> Complimentary Pan-India Delivery on Orders Above â‚¹2500 via Shiprocket
            </div>
            <div class="marquee-item">
                <i class="fas fa-truck-fast"></i> Complimentary Pan-India Delivery on Orders Above â‚¹2500 via Shiprocket
            </div>
            <div class="marquee-item">
                <i class="fas fa-truck-fast"></i> Complimentary Pan-India Delivery on Orders Above â‚¹2500 via Shiprocket
            </div>
            <div class="marquee-item">
                <i class="fas fa-truck-fast"></i> Complimentary Pan-India Delivery on Orders Above â‚¹2500 via Shiprocket
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-grid">
                <div class="footer-col">
                    <img src="images/logo.png" alt="Choco Blossom"
                        style="width: 140px; margin-bottom: 1rem; border-radius: 8px;">
                    <p style="color: rgba(255,255,255,0.7);">Crafting memories with premium chocolates. Based
                        in Ahmedabad, delivering happiness nationwide.</p>
                    <div class="social-links">
                        <a href="https://www.facebook.com/chocoblossomIndia/" target="_blank" class="social-icon"><i
                                class="fab fa-facebook-f"></i></a>
                        <a href="https://www.instagram.com/chocoblossomindia/" target="_blank" class="social-icon"><i
                                class="fab fa-instagram"></i></a>
                        <a href="https://www.youtube.com/@Choco-blossom" target="_blank" class="social-icon"><i
                                class="fab fa-youtube"></i></a>
                        <a href="https://www.linkedin.com/company/chocoblossom/" target="_blank" class="social-icon"><i
                                class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>

                <div class="footer-col">
                    <h4>Quick Links</h4>
                    <ul class="footer-links">
                        <li><a href="index.html">Home</a></li>
                        <li><a href="products.html">Shop All</a></li>
                        <li><a href="about.html">Our Story</a></li>
                        <li><a href="contact.html">Contact Us</a></li>
                    </ul>
                </div>

                <div class="footer-col">
                    <h4>Customer Care</h4>
                    <ul class="footer-links">
                        <li><a href="shipping.html">Shipping Policy</a></li>
                        <li><a href="returns.html">Returns & Refunds</a></li>
                        <li><a href="faq.html">FAQ</a></li>
                        <li><a href="https://www.shiprocket.in/shipment-tracking/" target="_blank">Track Order</a></li>
                    </ul>
                </div>

                <div class="footer-col">
                    <h4>Contact Us</h4>
                    <ul class="footer-links">
                        <li style="color: rgba(255,255,255,0.8); display: flex; gap: 10px;">
                            <i class="fas fa-map-marker-alt" style="margin-top: 5px;"></i>
                            <a href="https://maps.app.goo.gl/Jihe6SA3eRXgMHd29" target="_blank"
                                style="color: inherit; text-decoration: none;">
                                <span>28, Saurasthra Society, Paldi, Ahmedabad, Gujarat 380007</span>
                            </a>
                        </li>
                        <li style="color: rgba(255,255,255,0.8);">
                            <a href="tel:+919227088688" style="color: inherit; text-decoration: none;">
                                <i class="fas fa-phone" style="width: 20px;"></i> +91 92270 88688
                            </a>
                        </li>
                        <li style="color: rgba(255,255,255,0.8);">
                            <a href="mailto:chocoblossom12@gmail.com" style="color: inherit; text-decoration: none;">
                                <i class="fas fa-envelope" style="width: 20px;"></i> chocoblossom12@gmail.com
                            </a>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="footer-bottom">
                <div style="text-align: center;">
                    <p>&copy; 2026 Choco Blossom. All rights reserved.</p>
                    <p style="font-size: 0.85rem; margin-top: 0.2rem;">Based in Ahmedabad, Gujarat</p>
                </div>
                <div class="payment-icons">
                    <i class="fab fa-google-pay"></i>
                    <i class="fab fa-cc-visa"></i>
                    <i class="fab fa-cc-amex"></i>
                    <i class="fab fa-cc-mastercard"></i>
                    <i class="fab fa-cc-paypal"></i>
                </div>
            </div>
        </div>
    </footer>

    <script src="data.js"></script>
    <script src="reviews.js"></script>
    <script src="script.js"></script>
    <script>
        // Polyglot Analytics: Send data to Django Service (Python) ðŸ
        document.addEventListener('DOMContentLoaded', () => {
            const pageData = {
                page: window.location.pathname || 'home'
            };

            fetch('http://localhost:8000/api/analytics/track', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(pageData)
            })
                .then(res => res.json())
                .then(data => console.log('Django Analytics:', data))
                .catch(err => console.error('Django Analytics Error:', err));
        });

        // Backend code of Google review Section

        let currentSlide = 0;
        let reviews = [];
        let reviewsPerView = 3;

        function updateReviewsPerView() {
            if (window.innerWidth < 768) {
                reviewsPerView = 1;
            } else if (window.innerWidth < 1200) {
                reviewsPerView = 2;
            } else {
                reviewsPerView = 3;
            }
        }

        function getInitials(name) {
            return name.split(' ').map(word => word[0]).join('').toUpperCase().substring(0, 2);
        }

        function getRandomGradient() {
            const gradients = [
                'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
                'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)',
                'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)',
                'linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)',
                'linear-gradient(135deg, #fa709a 0%, #fee140 100%)',
                'linear-gradient(135deg, #30cfd0 0%, #330867 100%)',
            ];
            return gradients[Math.floor(Math.random() * gradients.length)];
        }

        function getTimeAgo(timestamp) {
            const now = new Date();
            const reviewDate = new Date(timestamp * 1000);
            const years = now.getFullYear() - reviewDate.getFullYear();
            const months = now.getMonth() - reviewDate.getMonth() + (years * 12);

            if (years > 0) return `${years} year${years > 1 ? 's' : ''} ago`;
            if (months > 0) return `${months} month${months > 1 ? 's' : ''} ago`;

            const days = Math.floor((now - reviewDate) / (1000 * 60 * 60 * 24));
            if (days > 0) return `${days} day${days > 1 ? 's' : ''} ago`;

            return 'Recently';
        }

        function slideReviews(direction) {
            updateReviewsPerView();
            const maxSlide = Math.max(0, reviews.length - reviewsPerView);
            currentSlide = Math.max(0, Math.min(maxSlide, currentSlide + direction));

            const track = document.getElementById('reviewsTrack');
            const cardWidth = 300 + 25;
            track.style.transform = `translateX(-${currentSlide * cardWidth}px)`;
        }

        // Updated Reviews Logic to use Local Data (reviews.js)
        async function loadReviews() {
            try {
                // Check if local data is available (Instant Load)
                if (window.REVIEWS_DATA) {
                    renderReviews(window.REVIEWS_DATA);
                    return;
                }

                // Fallback to API if local data missing (e.g. valid in some deployments)
                const res = await fetch("/api/reviews");
                const result = await res.json();

                if (Array.isArray(result)) {
                    renderReviews(result);
                } else {
                    console.error("Invalid review data format");
                }
            } catch (err) {
                console.error("Error loading reviews:", err);
                // Fail silently or show default placeholder if needed
            }
        }

        function showErrorMessage(errorData) {
            // Function kept but unused for now as we have local data
            console.warn("Review loading error:", errorData);
        }

        function renderReviews(data) {
            // Handle both array (direct list) or object (API response wrapper)
            const reviewsList = Array.isArray(data) ? data : (data.reviews || []);

            // Render business stats (Updated to 4.7 as requested)
            if (document.getElementById("overallRating")) {
                document.getElementById("overallRating").textContent = "4.7";
                document.getElementById("overallStars").innerHTML = "â˜…â˜…â˜…â˜…<span style='opacity: 0.3'>â˜…</span>";
            }

            reviews = reviewsList;

            // Render reviews
            const track = document.getElementById('reviewsTrack');
            track.innerHTML = '';

            reviews.forEach((review) => {
                const card = document.createElement('div');
                card.className = 'review-card';

                // Avatar Logic: Use Photo if available, else Initials
                // Random gradient for variety
                const gradient = getRandomGradient();
                let avatarHTML = '';

                if (review.profile_photo_url) {
                    avatarHTML = `<img src="${review.profile_photo_url}" alt="${review.name}" class="reviewer-avatar" style="width: 40px; height: 40px; border-radius: 50%; object-fit: cover;">`;
                } else {
                    avatarHTML = `<div class="reviewer-initials" style="display: flex; align-items: center; justify-content: center; width: 40px; height: 40px; background: ${gradient}; border-radius: 50%; color: white; font-weight: 700; font-size: 16px;">${review.initials || getInitials(review.name)}</div>`;
                }

                card.innerHTML = `
            <div class="review-header" style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                ${avatarHTML}
                <div class="reviewer-info">
                  <div class="reviewer-name" style="font-weight: 700; color: #3E2723;">${review.name}</div>
                  <div class="review-time" style="font-size: 0.85rem; color: #888;">${review.time || 'Verified Customer'}</div>
                </div>
                <!-- Google G Icon -->
                <div style="margin-left: auto;">
                    <svg class="google-icon" viewBox="0 0 48 48" style="width: 24px; height: 24px;">
                        <path fill="#EA4335" d="M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"/>
                        <path fill="#4285F4" d="M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"/>
                        <path fill="#FBBC05" d="M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"/>
                        <path fill="#34A853" d="M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"/>
                    </svg>
                </div>
            </div>
            
            <div class="review-stars" style="color: #FFC107; margin-bottom: 10px;">${'â˜…'.repeat(review.rating || 5)}${'â˜†'.repeat(5 - (review.rating || 5))}</div>
            
            <p class="review-text" style="color: #555; line-height: 1.6; font-size: 0.95rem;">${review.text}</p>
        `;
                track.appendChild(card);
            });

            updateReviewsPerView();
        }

        // Auto-slide functionality
        let autoSlideInterval;
        let autoRefreshInterval;

        function startAutoSlide() {
            autoSlideInterval = setInterval(() => {
                if (reviews.length > reviewsPerView) {
                    const maxSlide = Math.max(0, reviews.length - reviewsPerView);
                    if (currentSlide >= maxSlide) {
                        currentSlide = 0;
                    } else {
                        currentSlide++;
                    }
                    const track = document.getElementById('reviewsTrack');
                    const cardWidth = 300 + 25;
                    track.style.transform = `translateX(-${currentSlide * cardWidth}px)`;
                }
            }, 5000); // Slide every 5 seconds
        }

        function showRefreshIndicator(message, isRefreshing = false) {
            const indicator = document.getElementById('refreshIndicator');
            indicator.textContent = message;
            indicator.className = 'refresh-indicator show' + (isRefreshing ? ' refreshing' : '');

            setTimeout(() => {
                indicator.classList.remove('show');
            }, 3000);
        }

        function startAutoRefresh() {
            // Disabled: We are using local reviews.js
        }

        // Initialize
        loadReviews().then(() => {
            startAutoSlide();
            // startAutoRefresh(); // Disabled
            console.log('âœ… Reviews loaded.');
        });

        // Handle window resize
        window.addEventListener('resize', () => {
            updateReviewsPerView();
            currentSlide = 0;
            const track = document.getElementById('reviewsTrack');
            track.style.transform = 'translateX(0)';
        });

    </script>
</body>

</html>